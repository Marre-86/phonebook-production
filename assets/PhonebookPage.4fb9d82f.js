import{c as V,u as B,p as D,a as M,h as k,b as T,g as F,ac as j,ad as K,f as L,ae as R,q as O,af as z,ag as G,X as H,_ as E,Z as p,$ as f,a0 as c,ah as u,ai as J,a1 as n,I as X,a7 as v,aj as b,r as m,ak as x,al as Z,a4 as I,am as S,o as W,S as Y,a8 as g,a9 as ee,an as te,aa as ae,ao as $,a5 as q}from"./index.ace7390c.js";import{Q as oe}from"./QPage.01c97418.js";const ne=["horizontal","vertical","cell","none"];var le=V({name:"QMarkupTable",props:{...B,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ne.includes(e)}},setup(e,{slots:o}){const a=F(),t=D(e,a.proxy.$q),l=M(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(t.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>k("div",{class:l.value},[k("table",{class:"q-table"},T(o.default))])}});const y=j("counter",{state:()=>({counter:12,contacts:[{id:1,name:"Ivan Glotov",phone:"8 (800) 555 35 55",role:"Janitor"},{id:2,name:"Maria Fadina",phone:"8 (800) 78 21",role:"CEO"}]}),getters:{doubleCount(e){return e.counter*2}},actions:{deleteContact(e){this.contacts=this.contacts.filter(o=>o.id!==e)},addContact(e){const o={id:K(),name:e.value.name,phone:e.value.phone,role:e.value.role};this.contacts.push(o)},updateContact(e,o){const a=this.contacts.find(t=>t.id===o);Object.assign(a,e.value)}}});function se(){return L(R)}const re=k("div",{class:"q-space"});var ue=V({name:"QSpace",setup(){return()=>re}});function w(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var de=O({name:"close-popup",beforeMount(e,{value:o}){const a={depth:w(o),handler(t){a.depth!==0&&setTimeout(()=>{const l=z(e);l!==void 0&&G(l,t,a.depth)})},handlerKey(t){H(t,13)===!0&&a.handler(t)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:o,oldValue:a}){o!==a&&(e.__qclosepopup.depth=w(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});const ce={},ie={class:"text-h6"};function pe(e,o){return p(),f(b,{class:"row"},{default:c(()=>[u("div",ie,[J(e.$slots,"default")]),n(ue),X(n(v,{flat:"",round:"",dense:"",icon:"close"},null,512),[[de]])]),_:3})}var P=E(ce,[["render",pe]]);const N={__name:"ModalContactName",props:["name"],emits:["update:name"],setup(e,{expose:o}){const a=m(0);return o({nameInput:a}),(t,l)=>(p(),f(b,{class:"q-pt-none"},{default:c(()=>[n(x,{rules:[d=>!!d||"Field is required"],modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=d=>t.$emit("update:name",d)),autofocus:"",ref_key:"nameInput",ref:a,outlined:"",label:"Name *"},null,8,["rules","modelValue"])]),_:1}))}},Q={__name:"ModalContactPhone",props:["phone"],emits:["update:phone"],setup(e,{expose:o}){const a=m(0);o({phoneInput:a});const t=l=>/^[\d()+\s-]+$/.test(l);return(l,d)=>(p(),f(b,{class:"q-pt-none"},{default:c(()=>[n(x,{outlined:"",rules:[s=>!!s||"Field is required",s=>t(s)||"Invalid phone number"],ref_key:"phoneInput",ref:a,modelValue:e.phone,"onUpdate:modelValue":d[0]||(d[0]=s=>l.$emit("update:phone",s)),label:"Phone number *"},null,8,["rules","modelValue"])]),_:1}))}},U={__name:"ModalContactRole",props:["role"],emits:["update:role"],setup(e){return(o,a)=>(p(),f(b,{class:"q-pt-none"},{default:c(()=>[n(x,{modelValue:e.role,"onUpdate:modelValue":a[0]||(a[0]=t=>o.$emit("update:role",t)),outlined:"",label:"Role"},null,8,["modelValue"])]),_:1}))}},me={};function fe(e,o){return p(),f(Z,{align:"center"},{default:c(()=>[n(v,{label:"SAVE",color:"primary",type:"Submit"})]),_:1})}var A=E(me,[["render",fe]]);const he={__name:"AddContact",emits:["close"],setup(e,{emit:o}){const a=m({name:"",phone:"",role:""}),t=m(null),l=m(null),d=y(),s=()=>{d.addContact(a),o("close")},r=()=>{t.value.nameInput.validate(),l.value.phoneInput.validate(),!t.value.nameInput.hasError&&!l.value.phoneInput.hasError&&s()};return(C,h)=>(p(),f(S,{style:{width:"300px"}},{default:c(()=>[n(P,null,{default:c(()=>[I("Add Contact")]),_:1}),u("form",{onSubmit:r},[n(N,{name:a.value.name,"onUpdate:name":h[0]||(h[0]=i=>a.value.name=i),ref_key:"modalContactName",ref:t},null,8,["name"]),n(Q,{phone:a.value.phone,"onUpdate:phone":h[1]||(h[1]=i=>a.value.phone=i),ref_key:"modalContactPhone",ref:l},null,8,["phone"]),n(U,{role:a.value.role,"onUpdate:role":h[2]||(h[2]=i=>a.value.role=i)},null,8,["role"]),n(A)],32)]),_:1}))}},_e={__name:"EditContact",props:["contact"],emits:["close"],setup(e,{emit:o}){const a=e,t=m({name:"",phone:"",role:""});W(()=>{t.value.name=a.contact.name,t.value.phone=a.contact.phone,t.value.role=a.contact.role});const l=m(null),d=m(null),s=y(),r=()=>{s.updateContact(t,a.contact.id),o("close")},C=()=>{l.value.nameInput.validate(),d.value.phoneInput.validate(),!l.value.nameInput.hasError&&!d.value.phoneInput.hasError&&r()};return(h,i)=>(p(),f(S,{style:{width:"300px"}},{default:c(()=>[n(P,null,{default:c(()=>[I("Edit Contact")]),_:1}),u("form",{onSubmit:C},[n(N,{name:t.value.name,"onUpdate:name":i[0]||(i[0]=_=>t.value.name=_),ref_key:"modalContactName",ref:l},null,8,["name"]),n(Q,{phone:t.value.phone,"onUpdate:phone":i[1]||(i[1]=_=>t.value.phone=_),ref_key:"modalContactPhone",ref:d},null,8,["phone"]),n(U,{role:t.value.role,"onUpdate:role":i[2]||(i[2]=_=>t.value.role=_)},null,8,["role"]),n(A)],32)]),_:1}))}},ve={class:"q-mb-md flex justify-center"},Ce=u("thead",null,[u("tr",null,[u("th",{class:"text-left"},"Name"),u("th",{class:"text-right"},"Phone number"),u("th",{class:"text-right"},"Role"),u("th",{class:"text-right"})])],-1),be={class:"text-left"},qe={class:"text-right"},ke={class:"text-right"},xe={class:"text-right"},ye={class:"row"},ge={class:"flex justify-center"},Ve={__name:"PhonebookPage",setup(e){const o=y(),a=se(),t=Y({showAddContact:!1,showEditContact:!1,contact:null});function l(d){a.dialog({title:"Confirm",message:"Are you sure?",cancel:!0,persistent:!0}).onOk(()=>{o.deleteContact(d)})}return(d,s)=>(p(),f(oe,{class:"q-pa-md"},{default:c(()=>[u("div",ve,[n(le,null,{default:c(()=>[Ce,u("tbody",null,[(p(!0),g(ae,null,ee(te(o).contacts,r=>(p(),g("tr",{key:r.id},[u("td",be,q(r.name),1),u("td",qe,q(r.phone),1),u("td",ke,q(r.role),1),u("td",xe,[u("div",ye,[n(v,{onClick:C=>{t.showEditContact=!0,t.contact=r},flat:"",round:"",dense:"",color:"primary",icon:"edit"},null,8,["onClick"]),n(v,{onClick:C=>l(r.id),flat:"",round:"",dense:"",color:"red",icon:"delete"},null,8,["onClick"])])])]))),128))])]),_:1})]),u("div",ge,[n(v,{onClick:s[0]||(s[0]=r=>t.showAddContact=!0),class:"glossy",rounded:"",color:"primary",label:"Add Contact"})]),n($,{modelValue:t.showAddContact,"onUpdate:modelValue":s[2]||(s[2]=r=>t.showAddContact=r)},{default:c(()=>[n(he,{onClose:s[1]||(s[1]=r=>t.showAddContact=!1)})]),_:1},8,["modelValue"]),n($,{modelValue:t.showEditContact,"onUpdate:modelValue":s[4]||(s[4]=r=>t.showEditContact=r)},{default:c(()=>[n(_e,{onClose:s[3]||(s[3]=r=>t.showEditContact=!1),contact:t.contact},null,8,["contact"])]),_:1},8,["modelValue"])]),_:1}))}};export{Ve as default};
